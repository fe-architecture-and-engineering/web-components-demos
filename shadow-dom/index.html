<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
      .btn{
        height: 30px;
        font-size: 14px;
      }
      #ifr{
        display: block;
        margin-top: 50px;
        width: 100%;
        height: 500px;
      }
    </style>
</head>
<body>
  <h3>My Dialog</h3>

  <button class='btn' id='btn-open-dialog'>Open Dialog</button>
  <button class='btn' id='btn-change-name'>Change Dialog Name</button>
  <button class='btn' id='btn-remove-dialog'>Remove Dialog</button>
  <button class='btn' id='btn-adopt-dialog'>Adopt Dialog</button>

  <iframe frameborder="0" id='ifr'></iframe>
  <script src="index.js"></script>
  <script>
    let $dialog = null;
    const $btn_open_dialog = document.getElementById('btn-open-dialog');
    const $btn_remove_dialog = document.getElementById('btn-remove-dialog');
    const $btn_adopt_dialog = document.getElementById('btn-adopt-dialog');
    const $btn_change_name = document.getElementById('btn-change-name');

    const $ifr = document.getElementById('ifr');

    $btn_open_dialog.addEventListener('click',ev=>{
      if(!$dialog){
        createDialog();
      }
      $dialog.open = true;
    },false);

    $btn_remove_dialog.addEventListener('click',ev=>{
      $dialog.parentNode.removeChild($dialog);
    },false);

    $btn_adopt_dialog.addEventListener('click',ev=>{
      const $el = document.adoptNode($dialog);
      $ifr.contentWindow.document.body.appendChild($el);
    },false);
    
    $btn_change_name.addEventListener('click',ev=>{
      $dialog.name = Math.random();
    },false);

    function createDialog(){
      $dialog = document.createElement('my-dialog');
      $dialog.setAttribute('title','My Dialog Title');
      $dialog.setAttribute('content','My dialog content');
      $dialog.setAttribute('name',Math.random());
      document.body.appendChild($dialog);
    }
  </script>
</body>
</html>